# 06. 测试、验收与回滚（Testing & Rollout）

## 6.1 必测清单（Astro SSG）

- 路由可用性
  - 直接访问深层路径：`/chapter/1/section/1.1/`（无 404、HTML 可见正文）
- 内容正确性
  - 标题、代码高亮、图片路径（重点验证 `<base href>` + 图片路径规范）
  - 如仍需要“相邻图片合并”显示效果，验证对应 remark/样式实现
- 主题切换
  - 首屏主题闪烁（FOUC）是否可接受；主题初始化脚本是否在 `<head>` 生效
- base
  - GitHub Pages 子路径部署下，静态资源、图片、站内链接都正确

## 6.2 自动化校验建议（不要求一次到位）

- 构建后检查：抽样若干路由，确保 `dist/**/index.html` 存在且包含特定标题/正文片段
- 链接完整性：章节导航、前后小节跳转不出现死链

## 6.3 灰度与回滚策略

建议：

- 灰度：用分支或临时仓库先部署 Astro 版本进行验收
- 回滚：保留原 SPA 的构建与 workflow（或至少保留可回退的 tag/commit），出现问题可立即切回旧版本产物
