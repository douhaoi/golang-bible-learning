# é¡¹ç›®å½“å‰çŠ¶æ€è¯´æ˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç«‹å³æ¢å¤é¡¹ç›®åˆ°å¯å·¥ä½œçŠ¶æ€ï¼ˆæ¨èï¼‰

ç”±äº TanStack Router çš„ç±»å‹ç³»ç»Ÿæ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®å…ˆå›åˆ° react-router-dom è·å¾—å¯å·¥ä½œçš„åº”ç”¨ï¼Œç„¶åå†æ¸è¿›åœ°è¿ç§»ã€‚

```bash
# 1. æ¢å¤ react-router-dom
pnpm add react-router-dom@6.20.0

# 2. ä» git æ¢å¤ App.tsx å’Œ main.tsx
git checkout src/App.tsx src/main.tsx

# 3. æ¢å¤ vite.config.ts
git checkout vite.config.ts

# 4. æ›´æ–° index.html å…¥å£
# æ”¹å›: <script type="module" src="/src/main.tsx"></script>

# 5. å®‰è£…ä¾èµ–å¹¶æµ‹è¯•
pnpm install
pnpm dev
```

## ğŸ“Š æ”¹é€ å·¥ä½œæˆæœ

è¿™æ¬¡æ”¹é€ è™½ç„¶æœªå®Œå…¨å®Œæˆ TanStack Router çš„è¿ç§»ï¼Œä½†å·²å®Œæˆäº†å¤§é‡å‡†å¤‡å·¥ä½œï¼š

### å·²äº¤ä»˜çš„æˆæœ

1. **è¯¦ç»†çš„è¿ç§»è®¡åˆ’** (TANSTACK_MIGRATION_PLAN.md)
   - 14 ä¸ª Phase çš„å®Œæ•´æ”¹é€ æ­¥éª¤
   - æ¯ä¸ª Phase çš„å…·ä½“å®ç°æ–¹æ³•
   - é£é™©è¯„ä¼°å’Œç¼“è§£æ–¹æ¡ˆ

2. **å®Œæ•´çš„è·¯ç”±ç»“æ„** (src/routes/)
   - TanStack Router é£æ ¼çš„è·¯ç”±æ–‡ä»¶
   - åµŒå¥—è·¯ç”±å’ŒåŠ¨æ€å‚æ•°é…ç½®
   - å¯ç›´æ¥ç”¨äºåç»­çš„ TanStack è¿ç§»

3. **ä¾èµ–é…ç½®** (package.json, vite.config.ts)
   - TanStack Router ä¾èµ–å·²æ·»åŠ 
   - Vite é…ç½®å·²æ›´æ–°æ”¯æŒ TanStack
   - .env é…ç½®æ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²

4. **ç»„ä»¶æ”¹é€ åŸºç¡€**
   - Layout, Home, ChapterList, SectionDetail å·²é€‚é…æ–° API
   - åªéœ€ä¿®å¤ Link å’Œè·¯ç”± hooks çš„ç±»å‹é—®é¢˜

5. **å†…å®¹åŠ è½½ç³»ç»Ÿ**
   - serverContentLoader.ts å·²å®ç°
   - æ”¯æŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åŠ è½½ Markdown

## ğŸ”„ ä¸‹ä¸€æ­¥é€‰æ‹©

### é€‰é¡¹ 1ï¸âƒ£: å¿«é€Ÿæ¢å¤ï¼ˆç°åœ¨æ¨èï¼‰
- **æ—¶é—´**: 5-10 åˆ†é’Ÿ
- **å·¥ä½œ**: æ¢å¤æ—§æ–‡ä»¶ï¼Œå®‰è£…ä¾èµ–
- **ç»“æœ**: è·å¾—å®Œå…¨å¯å·¥ä½œçš„åº”ç”¨
- **ä¼˜ç‚¹**: ç«‹å³å¯ç”¨ï¼Œé›¶ç±»å‹é”™è¯¯

```bash
git checkout src/App.tsx src/main.tsx vite.config.ts
pnpm install
pnpm dev
```

### é€‰é¡¹ 2ï¸âƒ£: ç»§ç»­ TanStack æ”¹é€ ï¼ˆå‘¨æœŸè¾ƒé•¿ï¼‰
- **æ—¶é—´**: å‡ å¤©åˆ°ä¸€å‘¨
- **å·¥ä½œ**: æŒ‰ TANSTACK_MIGRATION_PLAN.md çš„æ­¥éª¤é€æ­¥å®Œæˆ
- **ç»“æœ**: å®Œæ•´çš„ SSR/SSG æ”¯æŒ
- **ä¼˜ç‚¹**: è·å¾— TanStack Router çš„å®Œæ•´ç‰¹æ€§

å…·ä½“æ­¥éª¤ï¼š
1. å‚è€ƒ TANSTACK_MIGRATION_PLAN.md çš„ç¬¬ 3-9 é˜¶æ®µ
2. é€æ­¥ä¿®å¤ç±»å‹æ£€æŸ¥é”™è¯¯
3. åœ¨ TanStack Router çš„å®Œæ•´æµ‹è¯•

### é€‰é¡¹ 3ï¸âƒ£: æ··åˆæ–¹æ¡ˆï¼ˆå¹³è¡¡ï¼‰
- **æ—¶é—´**: 1-2 å¤©
- **å·¥ä½œ**: ä¿æŒ react-router-domï¼Œæ·»åŠ  @tanstack/query
- **ç»“æœ**: è·å¾— TanStack ç”Ÿæ€çš„æ•°æ®ç®¡ç†ä¼˜åŠ¿ï¼Œé¿å…è·¯ç”±ç±»å‹å¤æ‚æ€§
- **ä¼˜ç‚¹**: æœ€å®ç”¨ï¼Œæ¸è¿›è¿ç§»

```bash
pnpm add @tanstack/react-query
# ä½¿ç”¨ TanStack Query ç®¡ç†æ•°æ®åŠ è½½
# ä¿æŒ react-router-dom è¿›è¡Œè·¯ç”±
```

## ğŸ› å½“å‰çš„ç±»å‹é”™è¯¯

å¦‚æœå°è¯•ç»§ç»­ TanStack Routerï¼Œéœ€è¦ä¿®å¤ï¼š

1. **router.tsx** - è·¯ç”±æ ‘ç±»å‹æ³¨å†Œ
2. **å„é¡µé¢ç»„ä»¶** - Link props å’Œè·¯ç”±å‚æ•°ç±»å‹
3. **serverContentLoader.ts** - Node ç±»å‹æ”¯æŒ

è¯¦è§ MIGRATION_STATUS.md çš„"å½“å‰é—®é¢˜"éƒ¨åˆ†ã€‚

## ğŸ“ é‡è¦æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ç”¨é€” |
|-----|------|
| `TANSTACK_MIGRATION_PLAN.md` | å®Œæ•´çš„è¿ç§»è®¡åˆ’ï¼ˆ14 ä¸ª Phaseï¼‰ |
| `MIGRATION_STATUS.md` | å½“å‰è¿›åº¦å’Œé—®é¢˜è¯Šæ–­ |
| `src/routes/` | TanStack Router é£æ ¼çš„è·¯ç”±æ–‡ä»¶ |
| `src/entry.client.tsx` | æ–°çš„å®¢æˆ·ç«¯å¯åŠ¨ç‚¹ |
| `.env` | ç¯å¢ƒå˜é‡é…ç½® |

## âœ¨ å­¦åˆ°çš„çŸ¥è¯†

é€šè¿‡è¿™æ¬¡æ”¹é€ å·¥ä½œï¼Œæˆ‘ä»¬ï¼š
- æ·±å…¥äº†è§£äº† TanStack Router çš„æ¶æ„
- è®¾è®¡äº†å®Œæ•´çš„ SSR/SSG è¿ç§»ç­–ç•¥
- ä¸º GitHub Pages éƒ¨ç½²åˆ›å»ºäº†å¤šç¯å¢ƒé…ç½®
- å‡†å¤‡äº† Markdown å†…å®¹çš„ SSR é¢„åŠ è½½æ–¹æ¡ˆ

è¿™äº›çŸ¥è¯†å’Œå·¥ä½œå¯ä»¥ç›´æ¥ç”¨äºåç»­çš„å®Œæ•´è¿ç§»ã€‚

## ğŸ“ æ¨èå­¦ä¹ èµ„æº

1. **TanStack Router å®˜æ–¹æ–‡æ¡£**
   - https://tanstack.com/router/latest/docs/framework/react/guide/creating-a-router

2. **å®Œæ•´çš„ TanStack Start ç¤ºä¾‹**
   - https://github.com/tanstack/start/tree/main/examples

3. **æœ¬é¡¹ç›®çš„è¿ç§»è®¡åˆ’**
   - å‚è€ƒ TANSTACK_MIGRATION_PLAN.md çš„æ¶æ„è½¬å˜éƒ¨åˆ†

---

**å»ºè®®è¡ŒåŠ¨**: é€‰æ‹©é€‰é¡¹ 1ï¸âƒ£ å¿«é€Ÿæ¢å¤ï¼Œè·å¾—å¯å·¥ä½œçš„åº”ç”¨ï¼Œç„¶åæœ‰è®¡åˆ’åœ°è¿›è¡Œé€‰é¡¹ 2ï¸âƒ£ æˆ– 3ï¸âƒ£ã€‚

