# Scripts ä½¿ç”¨è¯´æ˜

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„å„ç§è„šæœ¬å·¥å…·ã€‚

## ğŸ“¥ å†…å®¹çˆ¬è™«

### crawler.js - å®Œæ•´çˆ¬è™«

çˆ¬å–æ‰€æœ‰ç« èŠ‚ï¼ˆ1-14ç« ï¼‰çš„å†…å®¹ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
pnpm run crawl
# æˆ–
node scripts/crawler.js
```

**åŠŸèƒ½ï¼š**
- ä» [golang-china.github.io/gopl-zh](https://golang-china.github.io/gopl-zh) çˆ¬å–æ‰€æœ‰ç« èŠ‚
- è‡ªåŠ¨å°†å†…å®¹è½¬æ¢ä¸º Markdown æ ¼å¼
- ä¿å­˜åˆ°å¯¹åº”çš„ç« èŠ‚æ–‡ä»¶å¤¹ï¼ˆ`src/content/ch1/`, `src/content/ch2/`, ...ï¼‰
- æ–‡ä»¶å‘½åæ ¼å¼ï¼š`ch1-01.md`, `ch1-02.md`, ...
- ç”Ÿæˆç´¢å¼•æ–‡ä»¶ `index.json`

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
src/content/
â”œâ”€â”€ ch1/
â”‚   â”œâ”€â”€ ch1-01.md
â”‚   â”œâ”€â”€ ch1-02.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ch2/
â”‚   â”œâ”€â”€ ch2-01.md
â”‚   â””â”€â”€ ...
â””â”€â”€ index.json
```

### crawl-ch14.js - ç¬¬14ç« çˆ¬è™«

ä¸“é—¨çˆ¬å–ç¬¬14ç« ï¼ˆé™„å½•ï¼‰å†…å®¹ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
node scripts/crawl-ch14.js
```

**åŠŸèƒ½ï¼š**
- çˆ¬å–é™„å½•ç« èŠ‚ï¼ˆ14.1-14.4ï¼‰
- è‡ªåŠ¨ä¿å­˜åˆ° `src/content/ch14/` ç›®å½•
- æ–‡ä»¶å‘½åæ ¼å¼ï¼š`ch14-01.md`, `ch14-02.md`, ...

## ğŸ“¦ æ„å»ºå·¥å…·

### copy-content.js - å†…å®¹å¤åˆ¶

å°† `src/content/` å¤åˆ¶åˆ° `public/content/`ï¼Œç”¨äºå¼€å‘å’Œæ„å»ºã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
node scripts/copy-content.js
```

**è‡ªåŠ¨è§¦å‘ï¼š**
- `pnpm dev` - å¼€å‘å‰è‡ªåŠ¨å¤åˆ¶ï¼ˆpredev hookï¼‰
- `pnpm build` - æ„å»ºå‰è‡ªåŠ¨å¤åˆ¶ï¼ˆprebuild hookï¼‰

**åŠŸèƒ½ï¼š**
- é€’å½’å¤åˆ¶æ‰€æœ‰ç« èŠ‚æ–‡ä»¶å¤¹
- å¤åˆ¶ images ç›®å½•
- å¤åˆ¶ index.json

## ğŸ–¼ï¸ å›¾ç‰‡èµ„æº

å›¾ç‰‡èµ„æºéœ€è¦æ‰‹åŠ¨ä»åŸä»“åº“ä¸‹è½½å¹¶æ”¾ç½®åˆ° `src/content/images/` ç›®å½•ã€‚

**åŸä»“åº“å›¾ç‰‡åœ°å€ï¼š**
- https://github.com/gopl-zh/gopl-zh.github.com/tree/master/images

**å›¾ç‰‡è·¯å¾„æ ¼å¼ï¼š**
- Markdown ä¸­: `![](../images/ch1-01.png)` æˆ– `![](images/ch1-01.png)`
- å®é™…ä½ç½®: `src/content/images/ch1-01.png`
- æ„å»ºå: `public/content/images/ch1-01.png` â†’ `dist/content/images/ch1-01.png`

## ğŸ“‚ ç›®å½•ç»“æ„

çˆ¬è™«å’Œè„šæœ¬éµå¾ªä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
src/content/
â”œâ”€â”€ ch1/                    # ç¬¬1ç« 
â”‚   â”œâ”€â”€ ch1-01.md          # ç« èŠ‚-å°èŠ‚ï¼ˆä¸¤ä½æ•°ï¼‰
â”‚   â”œâ”€â”€ ch1-02.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ch2/                    # ç¬¬2ç« 
â”‚   â”œâ”€â”€ ch2-01.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ images/                 # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ ch1-01.png
â”‚   â”œâ”€â”€ ch1-01.gif
â”‚   â””â”€â”€ ...
â””â”€â”€ index.json             # ç« èŠ‚ç´¢å¼•
```

## ğŸ”§ é…ç½®

### çˆ¬è™«é…ç½®

åœ¨ `crawler.js` ä¸­ä¿®æ”¹ï¼š

```javascript
const BASE_URL = 'https://golang-china.github.io/gopl-zh';
const OUTPUT_DIR = join(__dirname, '../src/content');
```

### å»¶è¿Ÿè®¾ç½®

çˆ¬è™«è¯·æ±‚ä¹‹é—´çš„å»¶è¿Ÿï¼ˆé¿å…è¯·æ±‚è¿‡å¿«ï¼‰ï¼š

```javascript
await delay(500); // 500mså»¶è¿Ÿ
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¯·æ±‚**ï¼šçˆ¬è™«éœ€è¦ç½‘ç»œè®¿é—®ï¼Œè¯·ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
2. **è¯·æ±‚é¢‘ç‡**ï¼šè„šæœ¬å·²è®¾ç½®å»¶è¿Ÿï¼Œé¿å…è¯·æ±‚è¿‡å¿«
3. **æ–‡ä»¶è¦†ç›–**ï¼šé‡æ–°çˆ¬å–ä¼šè¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶
4. **å›¾ç‰‡ä¸‹è½½**ï¼šéœ€è¦å…ˆçˆ¬å–å†…å®¹ï¼Œå†ä¸‹è½½å›¾ç‰‡ï¼ˆå›¾ç‰‡å¼•ç”¨åœ¨ Markdown ä¸­ï¼‰
5. **ç›®å½•è‡ªåŠ¨åˆ›å»º**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€çš„ç« èŠ‚æ–‡ä»¶å¤¹

## ğŸ“ å¼€å‘æµç¨‹

å®Œæ•´çš„å†…å®¹è·å–æµç¨‹ï¼š

```bash
# 1. çˆ¬å–æ‰€æœ‰ç« èŠ‚å†…å®¹
pnpm run crawl

# 2. æ‰‹åŠ¨ä¸‹è½½å›¾ç‰‡èµ„æº
# ä» https://github.com/gopl-zh/gopl-zh.github.com/tree/master/images
# ä¸‹è½½éœ€è¦çš„å›¾ç‰‡åˆ° src/content/images/ ç›®å½•

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆä¼šè‡ªåŠ¨å¤åˆ¶å†…å®¹åˆ° publicï¼‰
pnpm dev
```

## ğŸ†• æ›´æ–°æ—¥å¿—

### 2025-12-14
- âœ… æ›´æ–°çˆ¬è™«æ”¯æŒç« èŠ‚æ–‡ä»¶å¤¹ç»“æ„
- âœ… æ–‡ä»¶å‘½åæ ¼å¼ä» `1-1.md` æ”¹ä¸º `ch1-01.md`
- âœ… è‡ªåŠ¨åˆ›å»ºç« èŠ‚æ–‡ä»¶å¤¹
- âœ… ç§»é™¤è‡ªåŠ¨å›¾ç‰‡ä¸‹è½½è„šæœ¬ï¼ˆæ”¹ä¸ºæ‰‹åŠ¨ä¸‹è½½ï¼‰
- âœ… æ·»åŠ  predev hook è‡ªåŠ¨å¤åˆ¶å†…å®¹

## ğŸ› æ•…éšœæ’æŸ¥

### çˆ¬è™«å¤±è´¥

**é—®é¢˜**ï¼šçˆ¬å–å¤±è´¥æˆ–è¶…æ—¶

**è§£å†³**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆ`timeout` é…ç½®ï¼‰
3. æ£€æŸ¥ç›®æ ‡ç½‘ç«™æ˜¯å¦å¯è®¿é—®

### æ–‡ä»¶ä¿å­˜å¤±è´¥

**é—®é¢˜**ï¼šæ— æ³•å†™å…¥æ–‡ä»¶

**è§£å†³**ï¼š
1. æ£€æŸ¥ç›®å½•æƒé™
2. ç¡®ä¿ç£ç›˜ç©ºé—´å……è¶³
3. æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

### å›¾ç‰‡æ˜¾ç¤ºé—®é¢˜

**é—®é¢˜**ï¼šå›¾ç‰‡æ— æ³•æ˜¾ç¤º

**è§£å†³**ï¼š
1. æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨äº `src/content/images/` ç›®å½•
2. ç¡®è®¤å›¾ç‰‡è·¯å¾„æ ¼å¼æ­£ç¡®ï¼ˆ`../images/xxx.png`ï¼‰
3. è¿è¡Œ `node scripts/copy-content.js` å¤åˆ¶åˆ° public ç›®å½•
4. é‡å¯å¼€å‘æœåŠ¡å™¨

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [DEPLOY.md](../DEPLOY.md) - éƒ¨ç½²æ–‡æ¡£
- [CODE_QUALITY.md](../CODE_QUALITY.md) - ä»£ç è´¨é‡æ–‡æ¡£
- [README.md](../README.md) - é¡¹ç›®è¯´æ˜

